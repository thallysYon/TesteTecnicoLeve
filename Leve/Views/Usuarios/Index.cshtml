@model Leve.ViewModels.UsuarioListaViewModel

@{
    ViewData["Title"] = "Usuários";
}

<div class="uk-section">
    <div class="uk-container">
        <div class="uk-flex uk-flex-between uk-flex-middle uk-margin-bottom">
            <div>
                <h1 class="uk-heading-bullet uk-margin-remove-bottom">Usuários</h1>
                <p class="uk-text-muted uk-margin-small-top">
                    Gerencie os usuários cadastrados no sistema.
                </p>
            </div>

            <div>
                <a asp-controller="Usuarios" asp-action="Cadastrar" class="uk-button uk-button-primary">
                    <span uk-icon="plus"></span>
                    <span class="uk-margin-small-left">Novo usuário</span>
                </a>
            </div>
        </div>

        @if (TempData["Sucesso"] is not null)
        {
            <div class="uk-alert-success" uk-alert>
                @TempData["Sucesso"]
            </div>
        }

        <div class="uk-margin-bottom uk-text-muted">
            Total de usuários: <strong>@Model.TotalItens</strong>
        </div>

        @if (!Model.Usuarios.Any())
        {
            <div class="uk-alert-warning" uk-alert>
                Nenhum usuário cadastrado até o momento.
            </div>
        }
        else
        {
            <div class="uk-grid-small uk-child-width-1-1 uk-child-width-1-2@s uk-child-width-1-3@l" uk-grid>
                @foreach (var usuario in Model.Usuarios)
                {
                    <div>
                        <div class="uk-card uk-card-default uk-card-body uk-box-shadow-small">
                            <div class="uk-flex uk-flex-middle uk-margin-bottom">
                                <div class="usuario-card-icone">
                                    <span uk-icon="icon: user; ratio: 1.5"></span>
                                </div>

                                <div class="uk-margin-small-left">
                                    <h3 class="uk-card-title uk-margin-remove-bottom">@usuario.NomeCompleto</h3>
                                    <span class="uk-label @(usuario.IsGestor ? "uk-label-warning" : "")">
                                        @(usuario.IsGestor ? "Gestor" : "Colaborador")
                                    </span>
                                </div>
                            </div>

                            <p class="uk-margin-small-bottom">
                                <strong>E-mail:</strong><br />
                                @usuario.Email
                            </p>

                            <p class="uk-margin-small-bottom">
                                <strong>Telefone celular:</strong><br />
                                @(string.IsNullOrWhiteSpace(usuario.TelefoneCelular) ? "Não informado" : usuario.TelefoneCelular)
                            </p>

                            <p class="uk-margin-small-bottom">
                                <strong>Telefone fixo:</strong><br />
                                @(string.IsNullOrWhiteSpace(usuario.TelefoneFixo) ? "Não informado" : usuario.TelefoneFixo)
                            </p>

                            <p class="uk-margin-remove-bottom">
                                <strong>Endereço:</strong><br />
                                @usuario.Endereco
                            </p>

                            <div class="uk-margin-top uk-grid-small" uk-grid>
                                <div class="uk-width-1-1">
                                    <a asp-controller="Usuarios"
                                       asp-action="Detalhes"
                                       asp-route-id="@usuario.Id"
                                       class="uk-button uk-button-default uk-width-1-1">
                                        <span uk-icon="search"></span>
                                        <span class="uk-margin-small-left">Ver detalhes</span>
                                    </a>
                                </div>

                                <div class="uk-width-1-1">
                                    <a asp-controller="Usuarios"
                                       asp-action="Editar"
                                       asp-route-id="@usuario.Id"
                                       class="uk-button uk-button-primary uk-width-1-1">
                                        <span uk-icon="file-edit"></span>
                                        <span class="uk-margin-small-left">Editar</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>

            @if (Model.TotalPaginas > 1)
            {
                <div class="uk-margin-large-top uk-flex uk-flex-center">
                    <ul class="uk-pagination">
                        @if (Model.PaginaAtual > 1)
                        {
                            <li>
                                <a asp-action="Index" asp-route-pagina="@(Model.PaginaAtual - 1)">
                                    <span uk-pagination-previous></span>
                                </a>
                            </li>
                        }

                        @for (int i = 1; i <= Model.TotalPaginas; i++)
                        {
                            <li class="@(i == Model.PaginaAtual ? "uk-active" : "")">
                                <a asp-action="Index" asp-route-pagina="@i">@i</a>
                            </li>
                        }

                        @if (Model.PaginaAtual < Model.TotalPaginas)
                        {
                            <li>
                                <a asp-action="Index" asp-route-pagina="@(Model.PaginaAtual + 1)">
                                    <span uk-pagination-next></span>
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            }
        }
    </div>
</div>